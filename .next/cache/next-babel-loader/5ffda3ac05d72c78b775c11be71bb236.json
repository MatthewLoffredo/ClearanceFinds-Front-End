{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Layout from \"./MyLayout\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './shop-homepage.css';\nimport fetch from 'isomorphic-unfetch';\nimport { Card, CardBody, CardImg, CardTitle, Col } from \"reactstrap\";\nimport Row from \"reactstrap/lib/Row\";\n\nconst Index = props => {\n  const manipulateImage = gs => {\n    for (let g of gs) {\n      /*\r\n      }\r\n           if (g.picture.indexOf(\"cloudinary\") >= 0 && g.picture.indexOf(\"w_500\") < 0) {\r\n               let lastS = g.picture.lastIndexOf(\"/\");\r\n               lastS = g.picture.lastIndexOf(\"/\", lastS - 1);\r\n               const str1 = g.picture.substring(0, lastS);\r\n               const str2 = g.picture.substring(lastS);\r\n               g.picture = str1 + \"/w_500,h_500,c_scale\" + str2\r\n               */\n      if (g.picture.indexOf(\"images.ulta.com\")) {\n        let lastS = g.picture.lastIndexOf(\"/\");\n        const str2 = g.picture.substring(lastS);\n        g.picture = 'https://res.cloudinary.com/daremighty/image/upload/w_500,h_500,c_scale/ulta/' + str2;\n      }\n    }\n\n    return gs;\n  };\n\n  const imgStyle = {\n    flex: 1,\n    aspectRatio: 1.5,\n    width: '100%',\n    height: '100%',\n    resizeMode: 'cover'\n  };\n  const gg = manipulateImage(props.goods);\n  const {\n    0: goods,\n    1: setGoods\n  } = useState(gg);\n\n  const handleSearch = data => {\n    data = manipulateImage(data);\n    setGoods(data);\n  };\n\n  const handleNextPage = data => {\n    data = manipulateImage(data);\n    let newGoods = goods.concat(data);\n    setGoods(newGoods);\n  };\n\n  return __jsx(Layout, {\n    handleSearch: handleSearch,\n    handleNextPage: handleNextPage\n  }, __jsx(Row, null, goods.map(g => __jsx(Col, {\n    lg: 4,\n    md: 6,\n    sm: 4,\n    key: g.id\n  }, __jsx(Card, null, __jsx(CardImg, {\n    top: true,\n    src: g.picture,\n    style: imgStyle\n  }), __jsx(CardBody, null, __jsx(CardTitle, {\n    tag: \"h4\"\n  }, __jsx(\"a\", {\n    href: g.link\n  }, g.name)), __jsx(\"h5\", {\n    style: {\n      color: 'red'\n    }\n  }, \"$\", g.price), __jsx(\"strike\", {\n    style: {\n      color: 'grey'\n    }\n  }, \"$\", g.regPrice), \"\\xA0\\xA0\", __jsx(\"span\", null, g.seller.name)))))));\n};\n\nIndex.getInitialProps = async function () {\n  const res = await fetch('http://localhost:8080/goods');\n  const data = await res.json();\n  console.log(`Show data fetched. Count: ${data.length}`);\n  return {\n    goods: data\n  };\n};\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}