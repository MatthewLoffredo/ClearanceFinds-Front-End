{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Layout from \"./MyLayout\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './shop-homepage.css';\nimport fetch from 'isomorphic-unfetch';\nimport { Card, CardBody, CardImg, CardTitle, Col } from \"reactstrap\";\nimport Row from \"reactstrap/lib/Row\";\n\nvar Index = function Index(props) {\n  var manipulateImage = function manipulateImage(gs) {\n    /*\r\n        for (let g of gs) {\r\n          if (g.picture.indexOf(\"images.ulta.com\")) {\r\n                   let lastS = g.picture.lastIndexOf(\"/\");\r\n                   const str2 = g.picture.substring(lastS);\r\n                   g.picture = 'https://res.cloudinary.com/daremighty/image/upload/w_500,h_500,c_scale/ulta/' + str2\r\n          }\r\n        }\r\n        */\n    return gs;\n  };\n\n  var imgStyle = {\n    flex: 1,\n    aspectRatio: 1.5,\n    width: 500,\n    height: 500,\n    resizeMode: 'cover'\n  };\n  var gg = manipulateImage(props.goods);\n\n  var _useState = useState(gg),\n      goods = _useState[0],\n      setGoods = _useState[1];\n\n  var handleSearch = function handleSearch(data) {\n    data = manipulateImage(data);\n    setGoods(data);\n  };\n\n  var handleNextPage = function handleNextPage(data) {\n    data = manipulateImage(data);\n    var newGoods = goods.concat(data);\n    setGoods(newGoods);\n  };\n\n  return __jsx(Layout, {\n    handleSearch: handleSearch,\n    handleNextPage: handleNextPage\n  }, __jsx(Row, null, goods.map(function (g) {\n    return __jsx(Col, {\n      lg: 4,\n      md: 6,\n      sm: 4,\n      key: g.id\n    }, __jsx(Card, null, __jsx(CardImg, {\n      top: true,\n      src: g.picture,\n      style: imgStyle\n    }), __jsx(CardBody, null, __jsx(CardTitle, {\n      tag: \"h4\"\n    }, __jsx(\"a\", {\n      href: g.link\n    }, g.name)), __jsx(\"h5\", {\n      style: {\n        color: 'red'\n      }\n    }, \"$\", g.price), __jsx(\"strike\", {\n      style: {\n        color: 'grey'\n      }\n    }, \"$\", g.regPrice), \"\\xA0\\xA0\", __jsx(\"span\", null, g.seller.name))));\n  })));\n};\n\nIndex.getInitialProps =\n/*#__PURE__*/\n_asyncToGenerator(\n/*#__PURE__*/\n_regeneratorRuntime.mark(function _callee() {\n  var res, data;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return fetch('http://localhost:8080/goods');\n\n        case 2:\n          res = _context.sent;\n          _context.next = 5;\n          return res.json();\n\n        case 5:\n          data = _context.sent;\n          console.log(\"Show data fetched. Count: \".concat(data.length));\n          return _context.abrupt(\"return\", {\n            goods: data\n          });\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}